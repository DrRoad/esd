\name{station}
\alias{station}
\alias{station.default}
\alias{station.ecad}
\alias{station.nacd}
\alias{station.narp}
\alias{station.nordklim}
\alias{station.metno}
\alias{station.ghcnd}
\alias{station.ghcnm}

\title{Retrieve station data.}
\description{Retrieve station record from a given data source}. Also see
  \code{\link{select.station}} and \code{\link{?}}.
}
\usage{


station(stid=NULL,...)

station.default(ss=NULL,stid=NULL,loc=NULL,param="t2m",lon=NULL,lat=NULL,alt=NULL,cntr=NULL,
                it= NULL,n.year=30,
                path="/disk1/data/",
                src = c("NARP","NACD","NORDKLIMA","GHCNM","ECAD","GHCND"),
                plot=FALSE,verbose=FALSE)

# Monthly weather station
station.nordklim(...)
station.narp(...)
station.nacd(...)
station.ghcnm(...,path="/data/GHCNM/")

#Daily weather station
station.ecad(...,url=NULL, path="/data/ECAD/")
station.ghcnd(...,url=NULL, path="/data/GHCND/")

station.metno(...,)

}

\arguments{
  \item{ss}{An object of class "stationmeta"}
  \item{stid}{A string of mixed characters and/or numbers as an identifier of the
    weather/climate station.}
  \item{loc}{A string of characters as the name of the location (weather/climate station).}
  \item{lon}{Longitude (degrees E): use for station selection. For a
    single number, select the closest station. For a single (lon,lat),
    select the closest location. For a vector with two values, select the
    stations within the regions defined by the corners (lon[1],lat[2]) and
    (lon[2],lat[2]).}
  \item{lat}{Numeric value of latitude for the reference point (in
    decimal degrees North) or a vector containing the range of latitude
    values in the form of c(lat.min,lat.max)}
  \item{alt}{Altitude (m a.s.l.): use for selection. Positive value,
    select all stations above this altitude; for negative values, select
    all stations below this latitude.}
  \item{cntr}{A string or a vector of strings of the full name of the
    country in capital: Select the stations from a specified country or a
    set of countries.}
  \item{param}{Parameter or element type. There are several core parameters or elements as well as a number of additional parameters. The parameters or elements are (Abdelkader : We need to update this list):
    auto         = automatic selection.
    prcp, pr     = Precipitation (mm)
    tas, tavg    = 2m-surface temperature (in degrees Celcius)
    tmax, tasmax = Maximum temperature (in degrees Celcius)
    tmin, tasmin = Minimum temperature (in degrees Celcius)
  }
  \item{src}{Source: limit the selection to a specific data set ("NARP","NACD","NORDKLIMA","GHCNM","ECAD" and "GHCND")}
  \item{plot}{Logical value. If, TRUE provides a plot.}
  \item{verbose}{Logical value defaulting to FALSE. If FALSE, do not
    display comments (silent mode). If TRUE, displays extra information on
    progress.}
  \item{path}{The path where the data are stored. Can be a symbolic link.}
}
\value{A time series of "zoo" "station" class with additional attributes used for
  further processing. }

\seealso{
  \code{\link{station.meta}} and \code{\link{map.station}}.
}

\author{R.E. Benestad}
\examples{
# Get daily data from the ECA&D data:
# If called for the first time, the script will download a huge chunk of
# data and store it locally.

# select meta for "De Bilt" station into ss,
ss <- select.station(loc = "de bilt",param="t2m",src="ECAD")

# Retrieve the data from the local directory specified in path based on
# previous selected station 
t2m.dly <- station(ss,path="/disk1/data/ECAD/")
# or directly retrieve the data without a prior selection 
station(loc = "de bilt",param="t2m",src="ECAD",path="/disk1/data/ECAD/")
plot(t2m.dly,main="Daily")

# Aggregate to monthly mean temperature values and plot the result
t2m.mon <- aggregate(t2m.dly, as.yearmon, mean, na.rm = TRUE)
plot(t2m.mon,main="Monhly")

# Aggregate to annual mean temperature values and plot the result
year <- as.numeric(format(index(t2m.mon), "%Y")) 
t2m.ann <- aggregate(t2m.mon, by=year, mean, na.rm = FALSE)
plot(t2m.ann,main="Annual")

# specify one station from ECAD, and this time get daily mean precipitation
ss <- select.station(loc = "Oxford",src="ECAD",param="precip")
precip.dly <- station(ss , path="/disk1/data/ECAD/")
plot(precip.dly)

# Get all the NARP stations in y
ss <- select.station(param="t2m",src="NARP")
y <- station(ss)

nuuk <- station.narp("stykkisholmur",param=401)

## select the meta data of a subset of stations in ss
ss <- select.station(cntr="NORWAY",param="precip",src="GHCND")

## map the geographical location of the selected stations with a zoom on Norway
map(ss, xlim = c(-10,30) , ylim = c(50,70))

## Select a subset of stations across Norway with a minimum number of 130 years using "GHCND" as a data source.
ss <- select.station(cntr="NORWAY",param="precip",src="GHCND",n.year=130)

## retrieve data based on previous selected stations in ss and put the result in y
y <- station(ss , path="/disk1/data/")

## Map the stations and Plot the time series in y
map(y , xlim = c(-10,30) , ylim = c(50,70))
plot(y)
}
\keyword{file}
